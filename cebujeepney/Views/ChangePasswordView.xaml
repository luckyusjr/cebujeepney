<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="cebujeepney.Views.ChangePasswordView"
             Title="Change Password"
             BackgroundColor="#F5F7FF">

    <ContentPage.Resources>
        <Color x:Key="PrimaryBlue">#2E43D9</Color>
        <Color x:Key="HeaderBlueStart">#73A7FF</Color>
        <Color x:Key="AccentPink">#C64CF1</Color>
        <Color x:Key="FieldText">#1A1A1A</Color>
        <Color x:Key="FieldPlaceholder">#4B5563</Color>

        <Style TargetType="Button">
            <Setter Property="TextColor" Value="White" />
            <Setter Property="BackgroundColor" Value="{StaticResource PrimaryBlue}" />
            <Setter Property="FontAttributes" Value="Bold" />
            <Setter Property="CornerRadius" Value="24" />
            <Setter Property="HeightRequest" Value="52" />
        </Style>

        <Style x:Key="PillEntry" TargetType="Entry">
            <Setter Property="BackgroundColor" Value="White" />
            <Setter Property="TextColor" Value="{StaticResource FieldText}" />
            <Setter Property="PlaceholderColor" Value="{StaticResource FieldPlaceholder}" />
            <Setter Property="FontSize" Value="16" />
            <Setter Property="HeightRequest" Value="50" />
            <Setter Property="Margin" Value="0,0,0,12" />
        </Style>
    </ContentPage.Resources>

    <Grid RowDefinitions="*,Auto">
        <Grid.Background>
            <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                <GradientStop Color="{StaticResource HeaderBlueStart}" Offset="0" />
                <GradientStop Color="{StaticResource PrimaryBlue}" Offset="1" />
            </LinearGradientBrush>
        </Grid.Background>

        <ScrollView>
            <VerticalStackLayout Padding="24,40" Spacing="16">

                <!-- Logo (same as register) -->
                <Image Source="cebujeeplogo.svg"
                   HeightRequest="150"
                   HorizontalOptions="Center"
                   Margin="0,0,0,0" />

                <Label Text="Change Password"
                   FontSize="25"
                   FontFamily="Bold"
                   FontAttributes="Bold"
                   TextColor="White"
                   HorizontalTextAlignment="Center"
                   Margin="0,0,0,5" />

                <Border Padding="20,24" Margin="0,0,0,5"
                    BackgroundColor="White">
                    <Border.StrokeShape>
                        <RoundRectangle CornerRadius="24" />
                    </Border.StrokeShape>

                    <VerticalStackLayout Spacing="0">

                        <Entry x:Name="CurrentPasswordEntry"
                           Placeholder="Current Password"
                           IsPassword="True"
                           FontSize="18"
                           Style="{StaticResource PillEntry}" />

                        <Entry x:Name="NewPasswordEntry"
                           Placeholder="New Password"
                           IsPassword="True"
                           FontSize="18"
                           Style="{StaticResource PillEntry}" />

                        <Entry x:Name="ConfirmPasswordEntry"
                           Placeholder="Confirm Password"
                           IsPassword="True"
                           FontSize="18"
                           Style="{StaticResource PillEntry}"
                           Margin="0,0,0,16" />

                        <Label x:Name="ErrorLabel"
                           Text=""
                           IsVisible="False"
                           FontAttributes="Bold"
                           FontSize="14"
                           TextColor="Red"
                           HorizontalTextAlignment="Center"
                           Margin="0,0,0,16" />

                        <Button Text="Change Password"
                                Command="{Binding ChangePasswordCommand}"
                                Clicked="OnChangePasswordClicked"
                                FontSize="18"
                                />

                        <Button Text="Cancel"
                                BackgroundColor="Transparent"
                                TextColor="{StaticResource PrimaryBlue}"
                                Clicked="OnCancelClicked"
                                FontSize="16"
                                Margin="0,8,0,0" />

                    </VerticalStackLayout>
                </Border>

            </VerticalStackLayout>
        </ScrollView>

        <Border Grid.Row="1" 
                BackgroundColor="White"
                Padding="24,20">
            <Border.StrokeShape>
                <RoundRectangle CornerRadius="0" />
            </Border.StrokeShape>

            <Label Text="Make Jeepney Rides easy to navigate."
                   FontSize="16"
                   FontAttributes="Bold"
                   TextColor="{StaticResource PrimaryBlue}"
                   HorizontalTextAlignment="Center" />
        </Border>
    </Grid>
</ContentPage>